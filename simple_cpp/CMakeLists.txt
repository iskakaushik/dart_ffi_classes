CMAKE_MINIMUM_REQUIRED(VERSION 3.14)

PROJECT (SIMPLE-CPP)

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
set(DARTSDK_ROOT ../third_party/dart-sdk/)

# Import sources generated by tool/update-dart-sdk.py
# This provides variables, and requires DARTSDK_ROOT to be set.
#  - dart_dl_sources
include(
  ../third_party/dart-sdk/sources.cmake
)

INCLUDE_DIRECTORIES(.)

SET (simple-cpp-sources
  simple.h
  simple.cpp
  ${dart_dl_sources}
)

ADD_LIBRARY (simple-cpp-lib SHARED ${simple-cpp-sources})

target_include_directories(
  simple-cpp-lib
  PRIVATE
  ../third_party/dart-sdk/src/runtime/
)

set_target_properties(
  simple-cpp-lib
  PROPERTIES
  C_VISIBILITY_PRESET hidden
  VISIBILITY_INLINES_HIDDEN 1
)
